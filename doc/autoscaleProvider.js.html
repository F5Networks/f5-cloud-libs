<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: autoscaleProvider.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: autoscaleProvider.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Copyright 2016 F5 Networks, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
'use strict';

var q = require('q');
var Logger = require('./logger');

/**
 * Constructor.
 * @class
 * @classdesc
 * Abstract cloud provider implementation.
 *
 * This class should be inherited from to implement cloud-provider
 * specific implementations. Any method in this class that throws
 * must be overridded. Methods that do not throw may be optionally
 * overridden.
 *
 * @param {Ojbect} [options] - Options for the instance
 * @param {Logger} [options.logger] - Logger to use. Default no logging.
 */
function AutoscaleProvider(options) {
    options = options || {};
    this.logger = options.logger || Logger.getLogger({logLevel: 'none'});
}

/**
 * Initialize class
 *
 * Override for implementation specific initialization needs (read info
 * from cloud provider, read database, etc.). Called at the start of
 * processing.
 *
 * @param {Object} providerOptions - Provider specific options.
 *
 * @returns {Promise} A promise which will be resolved when init is complete.
 */
AutoscaleProvider.prototype.init = function(providerOptions) {
    this.logger.debug("No override for AutoscaleProvider.init", providerOptions);
    return q();
};

/**
 * Gets the instance ID of this instance
 *
 * @abstract
 *
 * @returns {String} The instance ID of this instance
 */
AutoscaleProvider.prototype.getInstanceId = function() {
    throw new Error("Unimplemented abstract method AutoscaleProvider.getInstanceId");
};

/**
 * Gets info for each instance
 *
 * Info is retrieval is cloud specific. Likely either from the cloud infrastructure
 * itself, stored info that we have in a database, or both.
 *
 * @abstract
 *
 * @returns {Object} Dictionary of instance info keyed by instance ID. Instance info is
 *                   {
 *                       isMaster: &lt;Boolean>,
 *                       hostname: &lt;String>,
 *                       mgmtIp: &lt;String>,
 *                       privateIp: &lt;String>
 *                   }
 */
AutoscaleProvider.prototype.getInstances = function() {
    throw new Error("Unimplemented abstract method AutoscaleProvider.getInstances");
};

/**
 * Elects a new master instance from the available instances
 *
 * @abstract
 *
 * @param {Object} instances - Dictionary of instances as returned by getInstances
 *
 * @returns {String} Instance ID of the elected master
 */
AutoscaleProvider.prototype.electMaster = function(instances) {
    throw new Error("Unimplemented abstract method AutoscaleProvider.electMaster", instances);
};

/**
 * Determines if a given instanceId is a valid master
 *
 * In some cloud environments, the master may change unexpectedly.
 * Override this method if implementing such a cloud provider.
 *
 * @param {String} instanceId - Instance ID to validate as a valid master.
 *
 * @returns {Boolean} Wether or not the given instanceId is a valid master
 */
AutoscaleProvider.prototype.isValidMaster = function(instanceId) {
    this.logger.debug("No override for AutoscaleProvider.isValidMaster", instanceId);
    return q(true);
};

/**
 * Saves instance info
 *
 * Override for cloud implementations which store instance information.
 *
 * @param {Object} Instance information as returned by getInstances
 */
AutoscaleProvider.prototype.putInstance = function(instance) {
    this.logger.debug("No override for AutoscaleProvider.putInstance", instance);
    return q();
};

/**
 * Turns on instance protection for the given instance ID
 *
 * Override for cloud provicers that support instance protection from scale in.
 *
 * @param {String} [instanceId] - Instance ID of instnace to protect. Default instance ID of self.
 */
AutoscaleProvider.prototype.setInstanceProtection = function(instanceId) {
    this.logger.debug("No override for AutoscaleProvider.setInstanceProtection", instanceId);
    return q();
};

/**
 * Turns off instance protection for the given instance ID
 *
 * Override for cloud provicers that support instance protection from scale in.
 *
 * @param {String} [instanceId] - Instance ID of instnace to un-protect. Default instance ID of self.
 */
AutoscaleProvider.prototype.unsetInstanceProtection = function(instanceId) {
    this.logger.debug("No override for AutoscaleProvider.unsetInstanceProtection", instanceId);
    return q();
};

module.exports = AutoscaleProvider;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ipc.html">ipc</a></li><li><a href="module-logger.html">logger</a></li><li><a href="module-signals.html">signals</a></li><li><a href="module-util.html">util</a></li></ul><h3>Classes</h3><ul><li><a href="AutoscaleProvider.html">AutoscaleProvider</a></li><li><a href="BigIp.html">BigIp</a></li><li><a href="BigIpCluster.html">BigIpCluster</a></li><li><a href="BigIpOnboard.html">BigIpOnboard</a></li><li><a href="IControl.html">IControl</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Jan 19 2017 10:01:22 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
